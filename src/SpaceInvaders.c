/**
 * Space Invaders game using TM4C123 LaunchPad
 * Author: Timothy Nguyen
 * Credits: Dr. Jonathan Valvano and Dr. Ramesh Yerraballi
 */

// ******* Hardware I/O connections *******************
// Slide pot pin 1 connected to ground
// Slide pot pin 2 connected to PE2/AIN1
// Slide pot pin 3 connected to +3.3V 
// fire button connected to PE0
// special weapon fire button connected to PE1
// 8*R resistor DAC bit 0 on PB0 (least significant bit)
// 4*R resistor DAC bit 1 on PB1
// 2*R resistor DAC bit 2 on PB2
// 1*R resistor DAC bit 3 on PB3 (most significant bit)
// LED on PB4
// LED on PB5

// Blue Nokia 5110
// ---------------
// Signal        (Nokia 5110) LaunchPad pin
// Reset         (RST, pin 1) connected to PA7
// SSI0Fss       (CE,  pin 2) connected to PA3
// Data/Command  (DC,  pin 3) connected to PA6
// SSI0Tx        (Din, pin 4) connected to PA5
// SSI0Clk       (Clk, pin 5) connected to PA2
// 3.3V          (Vcc, pin 6) power
// back light    (BL,  pin 7) not connected, consists of 4 white LEDs which draw ~80mA total
// Ground        (Gnd, pin 8) ground

/* -------------------------------- Includes -------------------------------- */

#include "..//tm4c123gh6pm.h"
#include "Nokia5110.h"
#include "Random.h"
#include "TExaS.h"
#include "DAC.h"
#include "Sound.h"
#include "ADC.h"
#include "sprites.h"

/* ---------------------------------- BMPs For Sprites & Intro Screens---------------------------------- */

// intro screen frame 1
const char intro1[] = {
	0x00, 0xFC, 0xFC, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x00,
	0xF8, 0xF8, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0xF8, 0xF8, 0x00, 0xF8,
	0xF8, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0xF8, 0xF8, 0x00, 0xF8, 0xF8,
	0xF8, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x00, 0xF8, 0xF8, 0xF8,
	0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xFF, 0xFF, 0xFF, 0x00,
	0xFF, 0xFF, 0xFF, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0xFF,
	0xFF, 0xFF, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF,
	0xFF, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0x00, 0xFF, 0xFF, 0xFF,
	0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x0C, 0x0C, 0x0C, 0xFC, 0xFC, 0x0C, 0x0C, 0x0C, 0x00, 0xF8, 0xF8, 0xF0, 0xE0,
	0xC0, 0x80, 0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xF8, 0x00,
	0xE0, 0xF0, 0x30, 0x38, 0x38, 0x30, 0xF0, 0xE0, 0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18,
	0x18, 0xF8, 0xF0, 0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0xF8,
	0xF8, 0x18, 0x18, 0x18, 0x18, 0xF8, 0xF0, 0x00, 0xF0, 0xF8, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xC0, 0xC0, 0xC0, 0xFF, 0xFF, 0xC0, 0xC0, 0xC0, 0x00, 0xFF, 0xFF, 0x00, 0x01,
	0x03, 0x07, 0xFF, 0xFF, 0x00, 0x1F, 0x7F, 0xF0, 0xF0, 0x38, 0x1C, 0x0F, 0x03, 0x00,
	0xFF, 0xFF, 0x06, 0x06, 0x06, 0x06, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xC0, 0xC0, 0xC0,
	0xC0, 0xFF, 0x7F, 0x00, 0xFF, 0xFF, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0x00, 0xFF,
	0xFF, 0x03, 0x03, 0x03, 0x0F, 0xFD, 0xFD, 0x00, 0xC1, 0xC3, 0xC6, 0xC6, 0xC6, 0xC6,
	0xFE, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC0, 0xE0,
	0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0xC0, 0x00, 0x00, 0xC0, 0xC0,
	0xE0, 0xE0, 0xE2, 0xE4, 0xEF, 0xE4, 0xE2, 0xE0, 0xE0, 0xC0, 0xC0, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x1F, 0x00, 0x1C, 0x14, 0x1C, 0x00, 0x00, 0x00, 0x1F, 0x14, 0x1C,
	0x00, 0x1C, 0x1C, 0x14, 0x00, 0x5C, 0x54, 0x7C, 0x00, 0x1D, 0x00, 0x1C, 0x04, 0x1C,
	0x00, 0x00, 0x10, 0x00, 0x00, 0x10, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00};

// intro screen frame 2
const char intro2[] = {
	0x00, 0xFC, 0xFC, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x1C, 0x00,
	0xF8, 0xF8, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0xF8, 0xF8, 0x00, 0xF8,
	0xF8, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0xF8, 0xF8, 0x00, 0xF8, 0xF8,
	0xF8, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x00, 0xF8, 0xF8, 0xF8,
	0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xE3, 0xFF, 0xFF, 0xFF, 0x00,
	0xFF, 0xFF, 0xFF, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0xFF,
	0xFF, 0xFF, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0xFF, 0xFF, 0xFF, 0x00, 0xFF, 0xFF,
	0xFF, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0x00, 0xFF, 0xFF, 0xFF,
	0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0xE7, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x0C, 0x0C, 0x0C, 0xFC, 0xFC, 0x0C, 0x0C, 0x0C, 0x00, 0xF8, 0xF8, 0xF0, 0xE0,
	0xC0, 0x80, 0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x00, 0x00, 0x00, 0x00, 0xF8, 0xF8, 0x00,
	0xE0, 0xF0, 0x30, 0x38, 0x38, 0x30, 0xF0, 0xE0, 0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18,
	0x18, 0xF8, 0xF0, 0x00, 0xF8, 0xF8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0xF8,
	0xF8, 0x18, 0x18, 0x18, 0x18, 0xF8, 0xF0, 0x00, 0xF0, 0xF8, 0x18, 0x18, 0x18, 0x18,
	0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xC0, 0xC0, 0xC0, 0xFF, 0xFF, 0xC0, 0xC0, 0xC0, 0x00, 0xFF, 0xFF, 0x00, 0x01,
	0x03, 0x07, 0xFF, 0xFF, 0x00, 0x1F, 0x7F, 0xF0, 0xF0, 0x38, 0x1C, 0x0F, 0x03, 0x00,
	0xFF, 0xFF, 0x06, 0x06, 0x06, 0x06, 0xFF, 0xFF, 0x00, 0xFF, 0xFF, 0xC0, 0xC0, 0xC0,
	0xC0, 0xFF, 0x7F, 0x00, 0xFF, 0xFF, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0xC3, 0x00, 0xFF,
	0xFF, 0x03, 0x03, 0x03, 0x0F, 0xFD, 0xFD, 0x00, 0xC1, 0xC3, 0xC6, 0xC6, 0xC6, 0xC6,
	0xFE, 0x7C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x40, 0x80, 0xFC, 0x80, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xC0, 0xE0,
	0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0xC0, 0x00, 0x00, 0xC0, 0xC0,
	0xE0, 0xE0, 0xE0, 0xE0, 0xE1, 0xE0, 0xE0, 0xE0, 0xE0, 0xC0, 0xC0, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x1F, 0x00, 0x1C, 0x14, 0x1C, 0x00, 0x00, 0x00, 0x1F, 0x14, 0x1C,
	0x00, 0x1C, 0x1C, 0x14, 0x00, 0x5C, 0x54, 0x7C, 0x00, 0x1D, 0x00, 0x1C, 0x04, 0x1C,
	0x00, 0x00, 0x10, 0x00, 0x00, 0x10, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00};

// shows points that each type of enemy is worth
const char enemyScores[] = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xE0, 0x70, 0xFA, 0x6C, 0x78, 0x78, 0x78,
	0x78, 0x6C, 0xFA, 0x70, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0xD8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFE, 0x00, 0x00,
	0xFC, 0xFC, 0x46, 0x26, 0x16, 0xFC, 0xFC, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xC0, 0xE0, 0xE0, 0x61, 0x71, 0xF0, 0xF0,
	0x71, 0x61, 0xE0, 0xE0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x60, 0x70, 0x30, 0x30, 0x30, 0xF3, 0xE3, 0x00, 0x00,
	0xE1, 0xE1, 0x33, 0x33, 0xB3, 0xE1, 0xE1, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x08, 0x09, 0x05, 0x07, 0x03, 0x03, 0x85, 0x85,
	0x03, 0x03, 0x07, 0x05, 0x09, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x98, 0x9C, 0x9E, 0x9B, 0x99, 0x98, 0x00, 0x00,
	0x0F, 0x0F, 0x9A, 0x99, 0x98, 0x0F, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x40, 0x2C, 0x5E, 0x2B, 0x2F, 0x2F,
	0x2B, 0x5E, 0x2C, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x1B, 0x1B, 0x1B, 0x1B, 0x1B, 0x1B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x41, 0xC1, 0xD1, 0xD9, 0xDD, 0xF7, 0xF3, 0x00, 0x00,
	0x7F, 0x7F, 0xD1, 0xC9, 0xC5, 0x7F, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xB0, 0xF0, 0xF0, 0xB8, 0xF8, 0xF8, 0xB8, 0xF8,
	0xF8, 0xB8, 0xF0, 0xF0, 0xB0, 0xE0, 0xC0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18,
	0x1C, 0x0C, 0x8C, 0xCC, 0xCC, 0x7C, 0x38, 0x00, 0x00, 0x18, 0x1C, 0x0C, 0x8C, 0xCC,
	0xCC, 0x7C, 0x38, 0x00, 0x00, 0x18, 0x1C, 0x0C, 0x8C, 0xCC, 0xCC, 0x7C, 0x38, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x07, 0x0F, 0x07, 0x03, 0x01, 0x07, 0x07, 0x07,
	0x01, 0x03, 0x07, 0x0F, 0x07, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x1B, 0x1B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1B, 0x1B,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1B, 0x1B, 0x00, 0x00, 0x00, 0x00,
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00};

// enemy ship that starts at the top of the screen (arms/mouth closed)
// width=16 x height=10
const unsigned char SmallEnemy30PointA[] = {
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x0F, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x0F, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00,
 0xFF, 0x0F, 0xF0, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// enemy ship that starts at the top of the screen (arms/mouth open)
// width=16 x height=10
const unsigned char SmallEnemy30PointB[] = {
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F,
 0x0F, 0x00, 0x00, 0xF0, 0xF0, 0x00, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00,
 0xFF, 0x0F, 0xF0, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// enemy ship that starts in the middle of the screen (arms together)
// width=16 x height=10
const unsigned char SmallEnemy20PointA[] = {
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0xFF, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x0F, 0xF0, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF,
 0xF0, 0x0F, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// enemy ship that starts in the middle of the screen (arms apart)
// width=16 x height=10
const unsigned char SmallEnemy20PointB[] = {
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0,
 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0x00, 0x0F, 0xF0, 0x0F, 0xF0, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF,
 0xF0, 0x0F, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// enemy ship that starts at the bottom of the screen (arms down)
// width=16 x height=10
const unsigned char SmallEnemy10PointA[] = {
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x0F, 0xF0, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0xF0, 0xF0, 0x00, 0x00, 0x0F, 0x0F, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x0F,
 0xF0, 0xFF, 0xFF, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// enemy ship that starts at the bottom of the screen (arms up)
// width=16 x height=10
const unsigned char SmallEnemy10PointB[] = {
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F,
 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xFF,
 0xF0, 0xFF, 0xFF, 0x0F, 0xFF, 0x00, 0x00, 0xF0, 0xFF, 0xFF, 0xFF, 0xFF, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// image of the player's ship
// includes two blacked out columns on the left and right sides of the image to prevent smearing when moved 2 pixels to the left or right
// width=18 x height=8
const unsigned char PlayerShip0[] = {
 0x42, 0x4D, 0xD6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x12, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0x00, 0x00,
 0x00, 0x00, 0x00, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0x00, 0x00, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0xAA, 0xAA, 0xAA,
 0xAA, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0xAA, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// small, fast bonus enemy that occasionally speeds across the top of the screen after enough enemies have been killed to make room for it
// includes two blacked out columns on the left and right sides of the image to prevent smearing when moved 2 pixels to the left or right
// width=20 x height=7
const unsigned char SmallEnemyBonus0[] = {
 0x42, 0x4D, 0xCA, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x14, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x54, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x0F, 0xF0, 0x0F, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xF0, 0xFF, 0x0F, 0xF0,
 0xFF, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0xFF, 0xFF, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x0F, 0xFF, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// small shield floating in space to cover the player's ship from enemy fire (undamaged)
// width=18 x height=5
const unsigned char Bunker0[] = {
 0x42, 0x4D, 0xB2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x12, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0x00, 0x00, 0xAA, 0xAA, 0x00,
 0x00, 0x00, 0xAA, 0xAA, 0xA0, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA,
 0xAA, 0xAA, 0xA0, 0x00, 0x00, 0x00, 0x00, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0x00, 0xFF};

// small shield floating in space to cover the player's ship from enemy fire (moderate generic damage)
// width=18 x height=5
const unsigned char Bunker1[] = {
 0x42, 0x4D, 0xB2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x12, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0x00, 0x00, 0xAA, 0xAA, 0x00,
 0x00, 0x00, 0xAA, 0xAA, 0xA0, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x0A, 0xAA, 0xAA, 0xAA, 0xAA, 0xA0, 0xAA, 0xAA, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0x0A, 0xA0, 0xA0, 0xAA,
 0xAA, 0xA0, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0, 0xA0, 0x00, 0x0A, 0x0A, 0x0A, 0x00, 0x00, 0x00, 0x00, 0xFF};

// small shield floating in space to cover the player's ship from enemy fire (heavy generic damage)
// width=18 x height=5
const unsigned char Bunker2[] = {
 0x42, 0x4D, 0xB2, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x12, 0x00, 0x00, 0x00, 0x05, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x3C, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x0A, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0, 0xAA, 0x00,
 0x00, 0x00, 0xAA, 0x0A, 0xA0, 0x00, 0x00, 0x00, 0x0A, 0xAA, 0x0A, 0x00, 0x00, 0x00, 0x0A, 0x0A, 0x0A, 0xA0, 0xAA, 0xA0, 0xA0, 0xA0, 0xA0, 0x00, 0x00, 0x00, 0x00, 0xAA, 0x0A, 0x00, 0xA0, 0xA0,
 0xA0, 0x00, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// large explosion that can be used upon the demise of the player's ship (first frame)
// width=18 x height=8
const unsigned char BigExplosion0[] = {
 0x42, 0x4D, 0xD6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x12, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x0A, 0x00, 0x09, 0x00, 0x00, 0x00, 0x90, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x90, 0x00, 0x90, 0xB0, 0x0A, 0x00, 0x0B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x00, 0x0B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0xA0, 0x00, 0xE0, 0x00, 0x00,
 0x90, 0x90, 0x9A, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA0, 0x00, 0x00, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x90, 0x00, 0x00, 0xA0, 0x00, 0x00, 0xAE, 0x00, 0x00, 0x00, 0x00, 0x0A, 0x00,
 0x00, 0xE0, 0x0A, 0x0A, 0x00, 0x00, 0xB0, 0x00, 0x00, 0x00, 0xA0, 0x00, 0x09, 0x00, 0x00, 0x00, 0x90, 0x00, 0x0A, 0x00, 0x00, 0x00, 0xFF};

// large explosion that can be used upon the demise of the player's ship (second frame)
// width=18 x height=8
const unsigned char BigExplosion1[] = {
 0x42, 0x4D, 0xD6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x12, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x0E, 0x00, 0x09, 0x00, 0x09, 0x00, 0xB0, 0x00, 0xA0, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x90, 0x00, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xA9, 0x00, 0x00, 0x00, 0x00, 0x90,
 0x00, 0x00, 0x0B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0E, 0x00, 0x00, 0x00, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x90, 0x00, 0x00, 0x00, 0xE0, 0x00, 0x0A, 0x00, 0x90, 0x00, 0xB0, 0x00, 0x09, 0x00, 0x00, 0x00, 0xFF};

// small explosion for enemy sprites not including bonus enemy
const unsigned char SmallExplosion0New[] ={
 0x42, 0x4D, 0xC6, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x0A, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x50, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0xFF,
 0x0F, 0x00, 0x0F, 0x0F, 0xF0, 0x00, 0xF0, 0x0F, 0xF0, 0xF0, 0xF0, 0xFF, 0x00, 0xF0, 0x0F, 0x00, 0xF0, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x0F, 0x00,
 0xF0, 0x00, 0x00, 0xF0, 0x0F, 0x00, 0xF0, 0x0F, 0xF0, 0x00, 0x00, 0xFF, 0x00, 0xF0, 0x00, 0xFF, 0x0F, 0xF0, 0xFF, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x0F, 0xF0, 0x00, 0x00, 0x00, 0x00,
 0xF0, 0x00, 0x00, 0xF0, 0x00, 0x00, 0xFF,

};

// a missile in flight
// includes one blacked out row on the top, bottom, and right of the image to prevent smearing when moved 1 pixel down, up, or left
// width=4 x height=9
const unsigned char MissileNew[] = {
 0x42, 0x4D, 0x9A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xFF, 0xF0,
 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,
};

// a laser burst in flight
// includes one blacked out row on the top and bottom of the image to prevent smearing when moved 1 pixel up or down
// width=2 x height=9
const unsigned char Laser0[] = {
 0x42, 0x4D, 0x9A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x99, 0x00, 0x00, 0x00, 0xBB, 0x00,
 0x00, 0x00, 0xAA, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF};

// missile fired by bonus enemy
const unsigned char EnemyBonusMissile[] ={
 0x42, 0x4D, 0x9A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x76, 0x00, 0x00, 0x00, 0x28, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x09, 0x00, 0x00, 0x00, 0x01, 0x00, 0x04, 0x00, 0x00, 0x00,
 0x00, 0x00, 0x24, 0x00, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0xC4, 0x0E, 0x00, 0x00, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x80,
 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x80, 0x00, 0x00, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0xC0, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0xFF,
 0x00, 0x00, 0x00, 0xFF, 0xFF, 0x00, 0xFF, 0x00, 0x00, 0x00, 0xFF, 0x00, 0xFF, 0x00, 0xFF, 0xFF, 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x00, 0x00, 0x00, 0xFF, 0xF0,
 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0xFF, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF,
};


/* ------------------------- Definitions ------------------------ */
#define BUNKERW     ((unsigned char)Bunker0[18]) // dimensions obtained from BMP
#define BUNKERH     ((unsigned char)Bunker0[22])
#define ENEMY30W    ((unsigned char)SmallEnemy30PointA[18])
#define ENEMY30H    ((unsigned char)SmallEnemy30PointA[22])
#define ENEMY20W    ((unsigned char)SmallEnemy20PointA[18])
#define ENEMY20H    ((unsigned char)SmallEnemy20PointA[22])
#define ENEMY10W    ((unsigned char)SmallEnemy10PointA[18])
#define ENEMY10H    ((unsigned char)SmallEnemy10PointA[22])
#define ENEMYBONUSW ((unsigned char)SmallEnemyBonus0[18])
#define ENEMYBONUSH ((unsigned char)SmallEnemyBonus0[22])
#define LASERW      ((unsigned char)Laser0[18])
#define LASERH      ((unsigned char)Laser0[22])
#define MISSILEW    ((unsigned char)MissileNew[18])
#define MISSILEH    ((unsigned char)MissileNew[22])
#define PLAYERW     ((unsigned char)PlayerShip0[18])
#define PLAYERH     ((unsigned char)PlayerShip0[22])
	

#define ATK 					0x1 // PE0 pressed
#define SPECIALATK 				0x2 // PE1 pressed
#define NOTHINGPRESSED          0x0
#define SWITCHINPUTS			(*((volatile unsigned long *) 0x4002400C)) // PE1 and PE0 used for two switches
#define LOSE                  	(*((volatile unsigned long *) 0x40005040)) // PB4 connected to red LED
#define WIN                 	(*((volatile unsigned long *) 0x40005080)) // PB5 connected to green LED

#define NUMOFENEMYROW           4 
#define NUMOFENEMIES            12 // total enemy sprites not including boss
#define NUMOFMISSILES           4 // maximum missiles enemy sprites can have on screen at a time
#define NUMOFBONUSMISSILES      3 // maximum bonus missiles player can shoot in entire game

#define PIN5                    1<<5
#define PIN4                    1<<4

/* --------------------------- Function Prototypes -------------------------- */

void DisableInterrupts(void); // disable interrupts
void EnableInterrupts(void);  // enable interrupts
void Delay100ms(unsigned long count); // time delay in 0.1 seconds
void SysTick_Init(void); // initialize 30 Hz SysTick interrupts
void Switches_Init(void); // initialize PE0 and PE1 as input switches with weak pull-ups
void LEDs_Init(void); // initialize PB4 and PB5 for LEDs
unsigned long Switch_In(void); // receive inputs from switches

/* ---------------------------- Global Variables ---------------------------- */

unsigned char Semaphore = 0; // global flag to indicate that ISR has executed
unsigned long Switch_Input; 
unsigned long Switch_Prev = ATK;
volatile unsigned long ADCvalue;
unsigned char EnemyDead = 0; // 1 = first Enemy30, 2 = second Enemy30, ...
volatile unsigned char it; // global iterator
volatile unsigned char row; // used to display explosion at correct location
volatile unsigned char count = 0; // global SysTick timer count used for various functions
volatile unsigned char bonusMissileCount = 0; // maximum bonus missiles allowed = 3
volatile unsigned char gameStart = 0; // 1 = start the game
volatile unsigned short score = 0; // used to hold player's score

/* --------------------------------- Sprites -------------------------------- */

Sprite PlayerShip = {32, 47, PlayerShip0, 0}; 
Sprite Missile = {0,0,0,0}; 
Sprite BonusMissile[3] = {{0,0,Laser0,0}, {0,0,Laser0,0}, {0,0,Laser0,0}};
Sprite MissileEnemy[4] = {{0,0,MissileNew,0}, {0,0,MissileNew,0}, {0,0,MissileNew,0}, {0,0,MissileNew,0}};
Sprite2 Enemy30[4] = {{5, 9, {SmallEnemy30PointA, SmallEnemy30PointB}, 1},
					{21, 9, {SmallEnemy30PointA, SmallEnemy30PointB}, 1},
					{37, 9, {SmallEnemy30PointA, SmallEnemy30PointB}, 1},
					{53, 9, {SmallEnemy30PointA, SmallEnemy30PointB}, 1}};
Sprite2 Enemy20[4] = {{5, 20, {SmallEnemy20PointA, SmallEnemy20PointB}, 1},
					{21, 20, {SmallEnemy20PointA, SmallEnemy20PointB}, 1},
					{37, 20, {SmallEnemy20PointA, SmallEnemy20PointB}, 1},
					{53, 20, {SmallEnemy20PointA, SmallEnemy20PointB}, 1}};
Sprite2 Enemy10[4] = {{5, 30, {SmallEnemy10PointA, SmallEnemy10PointB}, 1},
					{21, 30, {SmallEnemy10PointA, SmallEnemy10PointB}, 1},
					{37, 30, {SmallEnemy10PointA, SmallEnemy10PointB}, 1},
					{53, 30, {SmallEnemy10PointA, SmallEnemy10PointB}, 1}};
Sprite2 Explosion = {0,0, {BigExplosion0, BigExplosion1}, 1};
Sprite2 BonusEnemy = {62, 9, {SmallEnemyBonus0, SmallEnemyBonus0}, 0};
Sprite3 Bunker[2] = {{15,30,{Bunker0,Bunker1,Bunker2}, 0}, {48,30,{Bunker0,Bunker1,Bunker2}, 0}};

const char* introScreen[2] = {intro2, intro1}; // hold 2 intro screen images

/* --------------------------- SysTick ISR Routine (30 Hz) -------------------------- */

void SysTick_Handler(void){

if(gameStart){

	ADCvalue = ADC0_In(); // obtain ADC value
	PlayerShip.x = ADCtoX(ADCvalue); // convert value to x coordinate

	Switch_Input = Switch_In(); // get switch input(positive logic)

	moveBonusMissile(BonusMissile, NUMOFBONUSMISSILES, LASERH); // move Bonus Missiles

	if(Switch_Input != Switch_Prev){  // only care about posedge

		if(Switch_Input == ATK){ // create normal player missile
			if(Missile.life == 0 && PlayerShip.life){ 
				Missile.x = PlayerShip.x + 7;
				Missile.y = 42;
				Missile.image = MissileNew;
				Missile.life = 1;
				Sound_Shoot();
			}
		}
			
		if(Switch_Input == SPECIALATK && bonusMissileCount <= NUMOFBONUSMISSILES){ // create bonus player missile
			for(it = 0; it < NUMOFBONUSMISSILES; it++){
				if(!BonusMissile[it].life){
					BonusMissile[it].x = PlayerShip.x + 9;
					BonusMissile[it].y = 42;
					BonusMissile[it].life = 1;
					bonusMissileCount++;
					Sound_Shoot();
					break;
				}
				
			}
		}		
	}

	Switch_Prev = Switch_Input; 

	if(Missile.life) // if missile still has life, move missile up screen by 1 pixel
		Missile.y--;

	if(Missile.life){ // check collisions between player missile and all enemy sprites
		for(it = 0; it < NUMOFENEMYROW; it++){
			if(Enemy30[it].life){
				if(checkCollision(Missile.x - 4, Missile.y, MISSILEW, MISSILEH - 1, Enemy30[it].x, Enemy30[it].y, ENEMY30W - 7, ENEMY30H))
					{ // if collision, kill sprites, play sound
					Missile.life = 0;
					Enemy30[it].life = 0;
					EnemyDead = it + 1; // 1 = first sprite, 2 = second sprite, ...
					row = 0;
					score += 30;
					Sound_Killed();
					break;
					}
			}
			if(Enemy20[it].life){
				if(checkCollision(Missile.x - 4, Missile.y, MISSILEW, MISSILEH - 1, Enemy20[it].x, Enemy20[it].y, ENEMY20W - 7, ENEMY20H))
					{ // if collision, kill sprites, play sound
					Missile.life = 0;
					Enemy20[it].life = 0;
					EnemyDead = it + 1; // 1 = first sprite, 2 = second sprite, ...
					row = 1;
					score += 20;
					Sound_Killed();
					break;
				}
			}
			if(Enemy10[it].life){
				if(checkCollision(Missile.x - 4, Missile.y, MISSILEW, MISSILEH - 1, Enemy10[it].x, Enemy10[it].y, ENEMY10W - 7, ENEMY10H))
					{ // if collision, kill sprites, play sound
					Missile.life = 0;
					Enemy10[it].life = 0;
					EnemyDead = it + 1; // 1 = first sprite, 2 = second sprite, ...
					row = 2;
					score += 10;
					Sound_Killed();
					break;
				}
			}
		
		}
	}
}

	Semaphore = 1; // indicate to main loop that ISR has executed
	count++;

}

/* ------------------------------ Main Program ------------------------------ */

int main(void){

	volatile unsigned long delay; 
	static unsigned char framecount = 0; // indicates which frame to display for sprites
	static unsigned char explosionCount = 0; // counter used adjust duration of explosion
	static unsigned char deadEnemyCount = 0;
	unsigned char i; // iterators
	unsigned char i2;
	unsigned long columnCheck = 0; // check column (0-3) if Enemy Ship available to fire missile, number randomized 
	unsigned char deadx; // marks x-coordinate of PlayerShip's death
	unsigned char rowEnemyMissile; //  row #1 corresponds to top row
	static unsigned char gameOver = 0; // gameOver = 1 will end the game
	static unsigned char winorlose = 0; // win = 1, lose = 0

	DisableInterrupts();

  	TExaS_Init(SSI0_Real_Nokia5110_Scope);  // set system clock to 80 MHz using PLL
  	Random_Init(1);
  	Nokia5110_Init(); // initialize Nokia LCD screen
	Timer2_Init(7256); // using Timer2A and Timer2B together in 32-bit mode, set for 11.025kHz
	DAC_Init(); // PB3-0 outputs DAC signal
	ADC0_Init(); // PE2 is input ADC signal from sliding pot.
	SysTick_Init(); // initialize 30 Hz SysTick interrupts
	Switches_Init(); // initialize PE1 and PE0 as inputs 
	LEDs_Init(); // initialize PB4 and PB5 as outputs for the two LEDs

	EnableInterrupts();

	Switch_Input = Switch_In(); // get switch input(positive logic)

	while(Switch_Input != ATK){ // display intro screen at beginning of game until right button pressed
		if(Semaphore && (count == 20)){
			Nokia5110_DrawFullImage(introScreen[framecount]);
			framecount ^= 1;
			if(framecount == 1){ // toggling through LEDs
				WIN = PIN5;
				LOSE = ~(PIN4);
			}
			else{
				LOSE = PIN4;
				WIN = ~(PIN5);
			}
			count = 0;
		}
		Switch_Input = Switch_In(); // get switch input(positive logic)
	}
	
	LOSE = ~(PIN4); // turn off two LEDs
	WIN = ~(PIN5);
	Sound_Fastinvader2();
	Nokia5110_DrawFullImage(enemyScores); // display points that each type of enemy is worth
	Delay100ms(50); // 5 second delay
	Sound_Fastinvader4();
	gameStart = 1; // start game
	count = 0; // reset counter
	PlayerShip.life = 1; 

  	while(!gameOver){
		
		if(Semaphore){ 
		
			Nokia5110_ClearBuffer(); 
		
			for(i2=0; i2<NUMOFBONUSMISSILES; i2++){	// checking collisions involving bonus missile with all enemy sprites
				if(BonusMissile[i2].life){ 
					for(i=0; i<NUMOFENEMYROW; i++){
						if(Enemy30[i].life){
							if(checkCollision(BonusMissile[i2].x, BonusMissile[i2].y, LASERW - 2, LASERH - 1, Enemy30[i].x, Enemy30[i].y, ENEMY30W - 2, ENEMY30H)){
								Enemy30[i].life = 0;
								deadEnemyCount++;
								Nokia5110_PrintBMP(Enemy30[i].x, Enemy30[i].y, SmallExplosion0New, 0);
								score += 30;
								Sound_Killed();
								break;
							}
						}
						if(Enemy20[i].life){
							if(checkCollision(BonusMissile[i2].x, BonusMissile[i2].y, LASERW - 2, LASERH - 1, Enemy20[i].x, Enemy20[i].y, ENEMY20W - 2, ENEMY20H)){
								Enemy20[i].life = 0;
								deadEnemyCount++;
								Nokia5110_PrintBMP(Enemy20[i].x, Enemy20[i].y, SmallExplosion0New, 0);
								score += 20;
								Sound_Killed();
								break;
							}
						}
						if(Enemy10[i].life){
							if(checkCollision(BonusMissile[i2].x, BonusMissile[i2].y, LASERW - 2, LASERH - 1, Enemy10[i].x, Enemy10[i].y, ENEMY10W - 2, ENEMY10H)){
								Enemy10[i].life = 0;
								deadEnemyCount++;
								score += 10;
								Nokia5110_PrintBMP(Enemy10[i].x, Enemy10[i].y, SmallExplosion0New, 0);
								Sound_Killed();
								break;
							}
						}
					}
				}
			}

			if(Missile.life && Bunker[0].life){ // checking collision between bunker and player missile
				if(checkCollision(Missile.x, Missile.y, MISSILEW, MISSILEH - 1, Bunker[0].x, Bunker[0].y, BUNKERW, BUNKERH)){
					Missile.life = 0;
				}
			}

			if(Missile.life && Bunker[1].life){ // checking collision between bunker and player missile
				if(checkCollision(Missile.x, Missile.y, MISSILEW, MISSILEH - 1, Bunker[1].x, Bunker[1].y, BUNKERW, BUNKERH)){
					Missile.life = 0;
				}
			}
    
			
			if(BonusEnemy.life && Missile.life){ // checking collision between bonus enemy and player missile
				if(checkCollision(Missile.x, Missile.y, MISSILEW - 2, MISSILEH - 1, BonusEnemy.x, BonusEnemy.y, ENEMYBONUSW - 2, ENEMYBONUSH)){
					BonusEnemy.life = 0;
					Missile.life = 0;
					Sound_Explosion();
					winorlose = 1;
					score += 100;
				}	
			}

			if(BonusEnemy.life){ // checking collision between bonus enemy and bonus missiles
				for(i=0; i<NUMOFBONUSMISSILES; i++){
					if(BonusMissile[i].life){
						if(checkCollision(BonusMissile[i].x, BonusMissile[i].y, LASERW - 2, LASERH - 1, BonusEnemy.x, BonusEnemy.y, ENEMYBONUSW - 2, ENEMYBONUSH)){
						BonusMissile[i].life = 0;
						BonusEnemy.life = 0;
						Sound_Explosion();
						winorlose = 1;
						score += 100;
						break;
						}
					}
				}
			}	
		

			for(i=0; i<NUMOFENEMYROW; i++){ // check for collision between enemy missile and player ship, boundaries, bunkers
				if(MissileEnemy[i].life){
					if(checkCollision(MissileEnemy[i].x, MissileEnemy[i].y, MISSILEW - 2, MISSILEH, PlayerShip.x, PlayerShip.y, PLAYERW - 2, PLAYERH - 1))
					{	
					MissileEnemy[i].life = 0;
					PlayerShip.life = 0;
					deadx = PlayerShip.x;
					Sound_Explosion();
					break;
					}
					if(MissileEnemy[i].y > 47)
						MissileEnemy[i].life = 0;
					if(Bunker[0].life){
						if(checkCollision(MissileEnemy[i].x, MissileEnemy[i].y, MISSILEW, MISSILEH, Bunker[0].x, Bunker[0].y, BUNKERW, BUNKERH)){
							MissileEnemy[i].life = 0;
							Bunker[0].life--;
							Sound_Highpitch();
						}
					}
					if(Bunker[1].life){
						if(checkCollision(MissileEnemy[i].x, MissileEnemy[i].y, MISSILEW, MISSILEH, Bunker[1].x, Bunker[1].y, BUNKERW, BUNKERH)){
							MissileEnemy[i].life = 0;
							Bunker[1].life--;
							Sound_Highpitch();
						}
					}
					
				}
			}

		
			if(BonusEnemy.life){ // print bunkers if bonus enemy is alive
				if(Bunker[0].life) // printing out bunkers
					Nokia5110_PrintBMP(Bunker[0].x, Bunker[0].y, Bunker[0].image[3-Bunker[0].life], 0);
				if(Bunker[1].life) // printing out bunkers
					Nokia5110_PrintBMP(Bunker[1].x, Bunker[1].y, Bunker[1].image[3-Bunker[1].life], 0);
			}


			if(PlayerShip.life) // place ship on screen if alive, otherwise place explosion for 25 cycles
				Nokia5110_PrintBMP(PlayerShip.x, PlayerShip.y, PlayerShip.image, 0); 
			else if(explosionCount < 25){
				Nokia5110_PrintBMP(deadx, PlayerShip.y, Explosion.image[framecount], 0);
				explosionCount++;
			}
			else
				gameOver = 1;

			moveSprite(Enemy30, NUMOFENEMYROW, ENEMY30W); // alternate through all enemies, moving and printing BMP
			moveSprite(Enemy20, NUMOFENEMYROW, ENEMY20W);
			moveSprite(Enemy10, NUMOFENEMYROW, ENEMY10W);
			moveBonusEnemy(&BonusEnemy, ENEMYBONUSW);

			if(count == 65 && (deadEnemyCount < NUMOFENEMIES)){ // check if row still has enemy, if so create missile
				count = 0;
				columnCheck = Random() >> 6; // want # from 0 to 3
				rowEnemyMissile = checkColForEnemy(Enemy30, Enemy20, Enemy10, columnCheck); // row #1 corresponds to top row
				if(rowEnemyMissile){
					if(rowEnemyMissile == 1)
						createEnemyMissile(MissileEnemy, Enemy30, columnCheck);
					else if(rowEnemyMissile == 2)
						createEnemyMissile(MissileEnemy, Enemy20, columnCheck);
					else
						createEnemyMissile(MissileEnemy, Enemy10, columnCheck);
					Sound_Fastinvader1();
				}		
			}

			if(count == 30 && (deadEnemyCount >= NUMOFENEMIES)){ //create bonus enemy missile if alive
				if(BonusEnemy.life){
					count = 0;
					createEnemyMissileBonus(MissileEnemy, &BonusEnemy, NUMOFMISSILES, EnemyBonusMissile);
					Sound_Fastinvader3();
				}
			}

			for(i = 0; i < NUMOFENEMYROW; i++){ // move missiles downwards 
				if(MissileEnemy[i].life){
					MissileEnemy[i].y++;
				}
			}

			for(i=0; i < NUMOFENEMYROW; i++){  // print enemies if alive
				if(Enemy30[i].life)
					Nokia5110_PrintBMP(Enemy30[i].x, Enemy30[i].y, Enemy30[i].image[framecount], 0);
				if(Enemy20[i].life)
					Nokia5110_PrintBMP(Enemy20[i].x, Enemy20[i].y, Enemy20[i].image[framecount], 0);
				if(Enemy10[i].life)
					Nokia5110_PrintBMP(Enemy10[i].x, Enemy10[i].y, Enemy10[i].image[framecount], 0);
				if(MissileEnemy[i].life)
					Nokia5110_PrintBMP(MissileEnemy[i].x, MissileEnemy[i].y, MissileEnemy[i].image, 0);
			}

			for(i = 0; i < NUMOFBONUSMISSILES; i++){ // print bonus missiles if alive
				if(BonusMissile[i].life)
					Nokia5110_PrintBMP(BonusMissile[i].x, BonusMissile[i].y, BonusMissile[i].image, 0);
			}

			if(EnemyDead){ // print explosion if enemy dead
				if(row == 0)
					Nokia5110_PrintBMP(Enemy30[EnemyDead - 1].x, Enemy30[EnemyDead - 1].y, SmallExplosion0New, 0);
				else if (row == 1)
					Nokia5110_PrintBMP(Enemy20[EnemyDead - 1].x, Enemy20[EnemyDead - 1].y, SmallExplosion0New, 0);
				else
					Nokia5110_PrintBMP(Enemy10[EnemyDead - 1].x, Enemy10[EnemyDead - 1].y, SmallExplosion0New, 0);
				deadEnemyCount++;
				EnemyDead = 0;
			}

			if((deadEnemyCount == NUMOFENEMIES) && (!BonusEnemy.life)){ // creating bonus enemy, bunkers, resetting count and direction, play sound
					count = 0;
					BonusEnemy.life = 1;
					Bunker[0].life = 3;
					Bunker[1].life = 3;
					deadEnemyCount++; // pass condition once only
				}
		
			if(Missile.y < 8 && Missile.life){ // if missile went out of bounds, missile is dead
				Missile.life = 0;
				Sound_Highpitch();
			}

			if(Missile.life) // print missile if has life
				Nokia5110_PrintBMP(Missile.x, Missile.y, Missile.image, 0);
			
			if(BonusEnemy.life) // display BonusEnemy or explosion for 25 cycles
				Nokia5110_PrintBMP(BonusEnemy.x, BonusEnemy.y, BonusEnemy.image[0], 0);
			else if(winorlose && (explosionCount < 25)){
				Nokia5110_PrintBMP(BonusEnemy.x, BonusEnemy.y, Explosion.image[framecount], 0);
				explosionCount++;
			}
			else if(winorlose)
				gameOver = 1;

			Nokia5110_DisplayBuffer();
			
			framecount ^= 1; // alternate between first and second frame

			Semaphore = 0; // clear semaphore after displaying everything on screen
		}

	}
	
	Nokia5110_Clear(); // display scores and message after game is over
	Nokia5110_SetCursor(2, 1);

	if(!winorlose){ // displays different message depending on win or loss
		Nokia5110_OutString("Mission     Failed!");
		Nokia5110_SetCursor(1, 4);
		Nokia5110_OutUDec(score);
		LOSE = PIN4; // turn on red LED
	}
	else{
		Nokia5110_OutString("Mission     Success!");
		Nokia5110_SetCursor(1, 4);
		Nokia5110_OutUDec(score);
		WIN = PIN5; // turn on green LED
	}

	return 0;
}

/* -------------------------- Function Definitions -------------------------- */

void Delay100ms(unsigned long count){unsigned long volatile time;
  while(count>0){
    time = 727240;  // 0.1sec at 80 MHz
    while(time){
	  	time--;
    }
    count--;
  }
}

void SysTick_Init(void){
  	NVIC_ST_RELOAD_R = 2666666;     // reload value for 30Hz interrupt clock trigger
  	NVIC_ST_CURRENT_R = 0;        // any write to current clears it
  	NVIC_SYS_PRI3_R = NVIC_SYS_PRI3_R&0x00FFFFFF; // priority 0               
  	NVIC_ST_CTRL_R = 0x00000007;  // enable with 80 Mhz system clock and interrupts
}

void Switches_Init(void){volatile unsigned long delay; // initialize PE1 and PE0 as inputs with internal pull-ups
	SYSCTL_RCGC2_R |= 0x10;
	delay = SYSCTL_RCGC2_R;
	GPIO_PORTE_DEN_R |= 0x3;
}

unsigned long Switch_In(void){ // return switch inputs only (PE0 & PE1)
	return SWITCHINPUTS;
}

void LEDs_Init(void){ // initialize PB4 and PB5 as outputs for the two LEDs
	volatile unsigned long delay; 
	SYSCTL_RCGC2_R |= 0x2;
	delay = SYSCTL_RCGC2_R;
	GPIO_PORTB_DEN_R |= 0x30;
	GPIO_PORTB_PCTL_R = 0;
	GPIO_PORTB_DIR_R |= 0x30;
}


/* This project accompanies the books
   "Embedded Systems: Real Time Interfacing to Arm Cortex M Microcontrollers",
   ISBN: 978-1463590154, Jonathan Valvano, copyright (c) 2013

   "Embedded Systems: Introduction to Arm Cortex M Microcontrollers",
   ISBN: 978-1469998749, Jonathan Valvano, copyright (c) 2013

 Copyright 2014 by Jonathan W. Valvano, valvano@mail.utexas.edu
    You may use, edit, run or distribute this file
    as long as the above copyright notice remains
*/
